{% load static %}
<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>Kirish | Cloudstore</title>
    <link rel="icon" type="image/png" href="{% static 'assets/img/favicon.png' %}">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&amp;family=SUSE:wght@100..800&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        :root {
            --adminuiux-content-font: "Open Sans", sans-serif;
            --adminuiux-content-font-weight: 400;
            --adminuiux-title-font: "SUSE", sans-serif;
            --adminuiux-title-font-weight: 600;
        }
    </style>

    <link href="{% static 'assets/css/app8051.css' %}" rel="stylesheet">
</head>

<body class="main-bg main-bg-opac adminuiux-header-standard theme-blue adminuiux-header-transparent adminuiux-sidebar-fill-white adminuiux-sidebar-standard bg-r-gradient scrollup" data-theme="theme-blue" data-sidebarfill="adminuiux-sidebar-fill-white" data-sidebarlayout="adminuiux-sidebar-standard" data-bs-spy="scroll" data-bs-target="#list-example" data-bs-smooth-scroll="true" tabindex="0" data-headerlayout="adminuiux-header-standard" data-bggradient="bg-r-gradient" data-headerfill="adminuiux-header-transparent">
    
    <!-- Pageloader -->
    <div class="pageloader">
        <div class="container h-100">
            <div class="row justify-content-center align-items-center text-center h-100">
                <div class="col-12 mb-auto pt-4"></div>
                <div class="col-auto">
                    <p class="h3 mb-0"><span class="text-gradient">Cloudstore</span></p>
                    <div class="loader6 mb-2 mx-auto" style="border-color: var(--adminuiux-theme-2);"></div>
                </div>
                <div class="col-12 mt-auto pb-4">
                    <p class="text-secondary">Yuklanmoqda...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="adminuiux-header z-index-5">
        <nav class="navbar">
            <div class="container-fluid">
                <a class="navbar-brand text-white" href="{% url 'boshlash' %}">
                    <div class="d-inline-block">
                        <span class="h4 text-white">Cloud<span class="fw-bold text-white">store</span></span>
                    </div>
                </a>
                <div class="ms-auto"></div>
            </div>
        </nav>
    </header>

    <main class="flex-shrink-0 pt-0 z-index-1">
        <div class="container">
            <div class="auth-wrapper">
                <!-- Background -->
                <div class="coverimg h-100 w-100 top-0 start-0 position-absolute z-index-0">
                    <img src="{% static 'assets/img/background-image/backgorund-image-14.png' %}" alt="" />
                </div>

                <!-- Login Form -->
                <div class="row justify-content-center minheight-dynamic position-relative z-index-1" style="--mih-dynamic: calc(100vh - 135px)">
                    <div class="col-12 col-md-8 col-xl-6">
                        <div class="h-100 py-4 px-md-3">
                            <div class="row h-100 align-items-center justify-content-center mt-md-3">
                                <div class="col-12 col-sm-8 col-md-11 col-xl-11 col-xxl-10 login-box">
                                    <div class="text-center text-white mb-3 mb-lg-4">
                                        <h1 class="mb-3">Xush kelibsiz!</h1>
                                        <p class="opacity-75">Hisobingizga kiring</p>
                                    </div>

                                    <!-- Error Messages -->
                                    {% if form.errors %}
                                    <div class="alert alert-danger mb-3">
                                        <i class="bi bi-exclamation-triangle me-2"></i>
                                        {% for field in form %}
                                            {% for error in field.errors %}
                                                {{ error }}
                                            {% endfor %}
                                        {% endfor %}
                                        {% for error in form.non_field_errors %}
                                            {{ error }}
                                        {% endfor %}
                                    </div>
                                    {% endif %}

                                    {% if messages %}
                                    {% for message in messages %}
                                    <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} mb-3">
                                        {{ message }}
                                    </div>
                                    {% endfor %}
                                    {% endif %}

                                    <div class="card adminuiux-card shadow-sm mb-3 mb-lg-4">
                                        <div class="card-body">
                                            <form method="POST" action="{% url 'login' %}">
                                                {% csrf_token %}
                                                
                                                <div class="form-floating mb-3">
                                                    <input type="text" 
                                                           class="form-control {% if form.username.errors %}is-invalid{% endif %}" 
                                                           id="username" 
                                                           name="username" 
                                                           placeholder="Foydalanuvchi nomi" 
                                                           value="{{ form.username.value|default:'' }}"
                                                           autofocus
                                                           required>
                                                    <label for="username">Foydalanuvchi nomi</label>
                                                </div>

                                                <div class="position-relative">
                                                    <div class="form-floating mb-3">
                                                        <button type="button" class="btn btn-square btn-link text-theme-1 position-absolute end-0 top-0 mt-2 me-2 z-3" onclick="togglePassword(this)">
                                                            <i class="bi bi-eye"></i>
                                                        </button>
                                                        <input type="password" 
                                                               class="form-control {% if form.password.errors %}is-invalid{% endif %}" 
                                                               id="password" 
                                                               name="password" 
                                                               placeholder="Parol"
                                                               required>
                                                        <label for="password">Parol</label>
                                                    </div>
                                                </div>

                                                <div class="row gx-2 align-items-center mb-3">
                                                    <div class="col">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" name="remember" id="remember">
                                                            <label class="form-check-label" for="remember">Eslab qolish</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-auto">
                                                        <a href="{% url 'password_reset' %}" class="btn btn-link">Parolni unutdingizmi?</a>
                                                    </div>
                                                </div>

                                                <div class="row gx-2 align-items-center">
                                                    <div class="col">
                                                        <button type="submit" class="btn btn-theme w-100">Kirish</button>
                                                    </div>
                                                    <div class="col">
                                                        <a href="{% url 'register' %}" class="btn btn-link w-100">Ro'yxatdan o'tish <i class="bi bi-chevron-right"></i></a>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="adminuiux-footer mt-auto bg-theme-1 z-index-1">
        <div class="container-fluid text-center pb-ios">
            <span class="small">Â© {% now "Y" %} 
                <a href="{% url 'boshlash' %}" class="text-white">Cloudstore</a>
            </span>
        </div>
    </footer>

    <!-- Page Level js -->
    <script src="{% static 'assets/js/app8051.js' %}"></script>
    
    <script>
        function togglePassword(btn) {
            const input = btn.parentElement.querySelector('input[type="password"], input[type="text"]');
            const icon = btn.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('bi-eye');
                icon.classList.add('bi-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('bi-eye-slash');
                icon.classList.add('bi-eye');
            }
        }
    </script>
</body>
</html>
